{"ast":null,"code":"import _slicedToArray from\"D:/MERN/Canvas_Drawing/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useRef,useState}from\"react\";import axios from\"axios\";import{saveAs}from\"file-saver\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var canvasRef=useRef(null);var ctx=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),selectedColor=_useState2[0],setSelectedColor=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),mouseDown=_useState4[0],setMouseDown=_useState4[1];var _useState5=useState({x:0,y:0}),_useState6=_slicedToArray(_useState5,2),lastPosition=_useState6[0],setPosition=_useState6[1];useEffect(function(){if(canvasRef.current){ctx.current=canvasRef.current.getContext(\"2d\");}},[]);var draw=useCallback(function(x,y){if(mouseDown){ctx.current.beginPath();ctx.current.strokeStyle=selectedColor;ctx.current.lineWidth=2;ctx.current.lineJoin=\"round\";ctx.current.moveTo(lastPosition.x,lastPosition.y);console.log(lastPosition.x,lastPosition.y);ctx.current.lineTo(x,y);ctx.current.closePath();ctx.current.stroke();setPosition({x:x,y:y});}},[lastPosition,mouseDown,selectedColor,setPosition]);var onMouseDown=function onMouseDown(e){setPosition({x:e.pageX-200,y:e.pageY-82});setMouseDown(true);};var onMouseUp=function onMouseUp(e){setMouseDown(false);};var onMouseMove=function onMouseMove(e){draw(e.pageX-200,e.pageY-82);};var createAndDownloadPdf=function createAndDownloadPdf(){var dataURL=canvasRef.current.toDataURL(\"image/png\",1.0);var state={name:\"Image\",image:dataURL};axios.post(\"/create-pdf\",state).then(function(){return axios.get(\"fetch-pdf\",{responseType:\"blob\"});}).then(function(res){var pdfBlob=new Blob([res.data],{type:\"application/pdf\"});saveAs(pdfBlob,\"newPdf.pdf\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"colors_palette\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"color_shape\",onClick:function onClick(e){return setSelectedColor(\"red\");}}),/*#__PURE__*/_jsx(\"button\",{className:\"color_shape\",onClick:function onClick(e){return setSelectedColor(\"green\");}}),/*#__PURE__*/_jsx(\"button\",{className:\"color_shape\",onClick:function onClick(e){return setSelectedColor(\"yellow\");}}),/*#__PURE__*/_jsx(\"button\",{className:\"color_shape\",onClick:function onClick(e){return setSelectedColor(\"blue\");}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"canvas_cantainer\",children:/*#__PURE__*/_jsx(\"canvas\",{width:780,height:380,ref:canvasRef,onMouseDown:onMouseDown,onMouseUp:onMouseUp,onMouseLeave:onMouseUp,onMouseMove:onMouseMove})}),/*#__PURE__*/_jsx(\"button\",{className:\"download_btn\",onClick:createAndDownloadPdf,children:\"Download PDF\"})]});}export default App;","map":{"version":3,"sources":["D:/MERN/Canvas_Drawing/client/src/App.js"],"names":["React","useCallback","useEffect","useRef","useState","axios","saveAs","App","canvasRef","ctx","selectedColor","setSelectedColor","mouseDown","setMouseDown","x","y","lastPosition","setPosition","current","getContext","draw","beginPath","strokeStyle","lineWidth","lineJoin","moveTo","console","log","lineTo","closePath","stroke","onMouseDown","e","pageX","pageY","onMouseUp","onMouseMove","createAndDownloadPdf","dataURL","toDataURL","state","name","image","post","then","get","responseType","res","pdfBlob","Blob","data","type"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport \"./App.css\";\n\nfunction App() {\n  const canvasRef = useRef(null);\n  const ctx = useRef(null);\n\n  const [selectedColor, setSelectedColor] = useState(false);\n  const [mouseDown, setMouseDown] = useState(false);\n  const [lastPosition, setPosition] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      ctx.current = canvasRef.current.getContext(\"2d\");\n    }\n  }, []);\n\n  const draw = useCallback(\n    (x, y) => {\n      if (mouseDown) {\n        ctx.current.beginPath();\n        ctx.current.strokeStyle = selectedColor;\n        ctx.current.lineWidth = 2;\n        ctx.current.lineJoin = \"round\";\n        ctx.current.moveTo(lastPosition.x , lastPosition.y);\n        console.log(lastPosition.x, lastPosition.y);\n        ctx.current.lineTo(x, y);\n        ctx.current.closePath();\n        ctx.current.stroke();\n\n        setPosition({\n          x,\n          y\n        });\n      }\n    },\n    [lastPosition, mouseDown, selectedColor, setPosition]\n  );\n\n  const onMouseDown = (e) => {\n    setPosition({\n      x: e.pageX - 200,\n      y: e.pageY - 82 \n    });\n    setMouseDown(true);\n  };\n\n  const onMouseUp = (e) => {\n    setMouseDown(false);\n  };\n\n  const onMouseMove = (e) => {\n    draw(e.pageX - 200, e.pageY - 82);\n  };\n\n\n  const createAndDownloadPdf = () => {\n    const dataURL = canvasRef.current.toDataURL(\"image/png\", 1.0);\n    const state = { name: \"Image\", image: dataURL };\n    \n    axios.post(\"/create-pdf\", state)\n      .then(() => axios.get(\"fetch-pdf\", { responseType: \"blob\" }))\n      .then((res) => {\n        const pdfBlob = new Blob([res.data], { type: \"application/pdf\" });\n\n        saveAs(pdfBlob, \"newPdf.pdf\");\n      });\n  };\n  \n  return (\n    <div className=\"App\">\n      <div className=\"colors_palette\">\n        <button\n          className=\"color_shape\"\n          onClick={(e) => setSelectedColor(\"red\")}\n        ></button>\n        <button\n          className=\"color_shape\"\n          onClick={(e) => setSelectedColor(\"green\")}\n        ></button>\n        <button\n          className=\"color_shape\"\n          onClick={(e) => setSelectedColor(\"yellow\")}\n        ></button>\n        <button\n          className=\"color_shape\"\n          onClick={(e) => setSelectedColor(\"blue\")}\n        ></button>\n      </div>\n      <div className=\"canvas_cantainer\">\n      <canvas\n        width={780}\n        height={380}\n        ref={canvasRef}\n        onMouseDown={onMouseDown}\n        onMouseUp={onMouseUp}\n        onMouseLeave={onMouseUp}\n        onMouseMove={onMouseMove}\n      />\n    </div>\n      <button className=\"download_btn\" onClick={createAndDownloadPdf}>\n        Download PDF\n      </button>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}